(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{408:function(s,o,v){"use strict";v.r(o);var e=v(28),_=Object(e.a)({},(function(){var s=this,o=s.$createElement,v=s._self._c||o;return v("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[v("h2",{attrs:{id:"sessoin-cookie-身份验证"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#sessoin-cookie-身份验证"}},[s._v("#")]),s._v(" Sessoin + Cookie 身份验证")]),s._v(" "),v("p",[v("img",{attrs:{src:"https://coders-shelf.com/wp-content/uploads/2020/01/session-cookie.png",alt:""}})]),s._v(" "),v("p"),v("div",{staticClass:"table-of-contents"},[v("ul",[v("li",[v("a",{attrs:{href:"#sessoin-cookie-身份验证"}},[s._v("Sessoin + Cookie 身份验证")])]),v("li",[v("a",{attrs:{href:"#简介"}},[s._v("简介")])]),v("li",[v("a",{attrs:{href:"#验证原理"}},[s._v("验证原理")])]),v("li",[v("a",{attrs:{href:"#缺点"}},[s._v("缺点")])]),v("li",[v("a",{attrs:{href:"#跨域身份验证"}},[s._v("跨域身份验证")])]),v("li",[v("a",{attrs:{href:"#session"}},[s._v("Session")])]),v("li",[v("a",{attrs:{href:"#cookie"}},[s._v("Cookie")]),v("ul",[v("li",[v("a",{attrs:{href:"#含义"}},[s._v("含义")])]),v("li",[v("a",{attrs:{href:"#查看"}},[s._v("查看")])]),v("li",[v("a",{attrs:{href:"#缺点"}},[s._v("缺点")])])])])])]),v("p"),s._v(" "),v("h2",{attrs:{id:"简介"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),v("p",[v("code",[s._v("session")]),s._v("和"),v("code",[s._v("cookie")]),s._v("都是用于存储数据")]),s._v(" "),v("blockquote",[v("p",[v("code",[s._v("cookie")]),s._v("存储在客户端浏览器")]),s._v(" "),v("p",[v("code",[s._v("session")]),s._v("存储在服务器端")])]),s._v(" "),v("h2",{attrs:{id:"验证原理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#验证原理"}},[s._v("#")]),s._v(" 验证原理")]),s._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[s._v("Session + Cookie 验证步骤：")]),s._v(" "),v("ol",[v("li",[s._v("客户端登录，给服务器发送用户名+密码")]),s._v(" "),v("li",[s._v("服务器验证登陆")]),s._v(" "),v("li",[s._v("将用户信息存储到当前请求的"),v("code",[s._v("session")]),s._v("对象，并生成唯一"),v("code",[s._v("sessin id")])]),s._v(" "),v("li",[s._v("服务器将"),v("code",[s._v("sessin id")]),s._v("存入 "),v("code",[s._v("cookie")])]),s._v(" "),v("li",[s._v("此后每次用户登陆都将 "),v("code",[s._v("cookie")]),s._v("发送给服务器验证")]),s._v(" "),v("li",[s._v("服务器接收 "),v("code",[s._v("cookie")]),s._v("解析"),v("code",[s._v("session id")]),s._v("，匹配之前存储到"),v("code",[s._v("session")]),s._v("的数据，验证用户身份")])])]),s._v(" "),v("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://pbs.twimg.com/media/E3v8t-CVIAAxXWJ?format=jpg&name=medium"}}),s._v(" "),v("h2",{attrs:{id:"缺点"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[s._v("#")]),s._v(" 缺点")]),s._v(" "),v("p",[s._v("适用于"),v("strong",[s._v("服务器端渲染")]),s._v("的开发模式")]),s._v(" "),v("p",[s._v("扩展性不好，跨域时麻烦")]),s._v(" "),v("p",[v("code",[s._v("Session")]),s._v("认证机制需要配合 Cookie 才能实现，由于"),v("code",[s._v("Cookie")]),s._v("默认不支持跨域，若是多个服务器之间的跨域服务（一个账号登陆后可使用同一公司两个不同业务服务），就需要实现服务器之间"),v("code",[s._v("session数据")]),s._v("共享问题")]),s._v(" "),v("h2",{attrs:{id:"跨域身份验证"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#跨域身份验证"}},[s._v("#")]),s._v(" 跨域身份验证")]),s._v(" "),v("ol",[v("li",[v("p",[s._v("将"),v("code",[s._v("session")]),s._v("数据写入数据库服务器每次收到请求都去数据库获取"),v("code",[s._v("session")]),s._v("数据。")]),s._v(" "),v("p",[s._v("但该方法结构清晰但缺点是工程量大，且万一数据库被黑了就完了。")])]),s._v(" "),v("li",[v("p",[s._v("服务器不再保存"),v("code",[s._v("session")]),s._v("数据，将数据保存在客户端，每次用户请求都发送到服务器。")]),s._v(" "),v("p",[s._v("比如 "),v("a",{attrs:{href:""}},[s._v("JWT 身份验证")])])])]),s._v(" "),v("h2",{attrs:{id:"session"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[s._v("#")]),s._v(" Session")]),s._v(" "),v("p",[v("code",[s._v("Session")]),s._v(" 实质是个对象，存储在服务器内存中")]),s._v(" "),v("p",[s._v("里面可以存储多条数据，每个数据都有一个唯一标识 "),v("strong",[v("code",[s._v("session id")])])]),s._v(" "),v("h2",{attrs:{id:"cookie"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[s._v("#")]),s._v(" Cookie")]),s._v(" "),v("h3",{attrs:{id:"含义"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#含义"}},[s._v("#")]),s._v(" 含义")]),s._v(" "),v("p",[v("code",[s._v("Cookie")]),s._v("是浏览器在电脑硬盘中开辟的一块空间，主要用于存储数据")]),s._v(" "),v("p",[v("code",[s._v("Cookie")]),s._v("是存储在浏览器中的，且浏览器提供读写"),v("code",[s._v("Cookie")]),s._v("的 API")]),s._v(" "),v("ul",[v("li",[v("p",[s._v("不超过 4KB 的字符串，且以"),v("code",[s._v("Name")]),s._v("和"),v("code",[s._v("Value")]),s._v("的健值对形式存储")])]),s._v(" "),v("li",[v("p",[v("code",[s._v("cookie")]),s._v("中的数据是以 "),v("strong",[s._v("域名的形式")]),s._v(" 进行区分，且域名独立")]),s._v(" "),v("p",[s._v("不同域名下的"),v("code",[s._v("Cookie")]),s._v("各自独立不能互相访问，比如 baidu 域名下的 Cookie 不能访问 twitter 域名的 Cookie")])]),s._v(" "),v("li",[v("p",[v("code",[s._v("cookie")]),s._v("中的数据"),v("strong",[s._v("有时效性会过期")]),s._v("，过期的数据会被浏览器自动删除")])]),s._v(" "),v("li",[v("p",[v("code",[s._v("cookie")]),s._v("中的数据会随着客户端浏览器请求"),v("strong",[s._v("自动发送")]),s._v("到服务器，进行身份验证")]),s._v(" "),v("p",[s._v("第一次访问服务器时，服务器响应过后才会产生"),v("code",[s._v("cookie")])])])]),s._v(" "),v("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://pbs.twimg.com/media/E3v5JEnUcAE0Sh2?format=jpg&name=medium"}}),s._v(" "),v("h3",{attrs:{id:"查看"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#查看"}},[s._v("#")]),s._v(" 查看")]),s._v(" "),v("p",[s._v("可通过 浏览器开发者工具的 application 面板中的 cookies 检查")]),s._v(" "),v("p",[s._v("如下，淘宝网服务器在客户端浏览器中储存的 cookie")]),s._v(" "),v("img",{attrs:{src:"https://pbs.twimg.com/media/E57DJPOVEAc7zaH?format=jpg&name=small"}}),s._v(" "),v("h3",{attrs:{id:"缺点-2"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#缺点-2"}},[s._v("#")]),s._v(" 缺点")]),s._v(" "),v("p",[v("code",[s._v("Cookie")]),s._v("不具有安全性，容易被伪造。")]),s._v(" "),v("p",[s._v("不建议服务器通过"),v("code",[s._v("Cookie")]),s._v("将重要的隐私内容发送给浏览器")]),s._v(" "),v("p",[s._v("所以需要通过"),v("code",[s._v("Session")]),s._v(" + "),v("code",[s._v("Cookie")]),s._v(" 的形式来提高身份认证的安全性")])])}),[],!1,null,null,null);o.default=_.exports}}]);