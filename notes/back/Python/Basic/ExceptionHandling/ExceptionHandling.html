<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python 异常与错误处理 | BlaxBerry</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Chen's Program Study Note">
    
    <link rel="preload" href="/vuepress-studynotes/assets/css/0.styles.6ab362df.css" as="style"><link rel="preload" href="/vuepress-studynotes/assets/js/app.e982dd05.js" as="script"><link rel="preload" href="/vuepress-studynotes/assets/js/2.46821667.js" as="script"><link rel="preload" href="/vuepress-studynotes/assets/js/20.e0385ce8.js" as="script"><link rel="prefetch" href="/vuepress-studynotes/assets/js/10.bac43c20.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/11.73ce61ad.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/12.d32056b2.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/13.196b9288.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/14.70c43f4a.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/15.b76a9fd7.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/16.dfc8a85c.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/17.3d2a77e6.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/18.909b89b9.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/19.4ea45f35.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/21.141cc0a4.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/22.211f24f1.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/23.da36b7bd.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/24.56b42648.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/25.9b5cda05.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/26.2e3b77bc.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/27.c227853f.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/28.7eeaf759.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/29.e95088c3.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/3.74d11656.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/30.a42b8a16.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/31.617ed2f4.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/32.e039929f.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/33.c2350d1b.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/34.f211318c.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/35.0091da08.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/36.8de5cebe.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/37.3347d52d.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/38.e12c75fb.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/39.1915f522.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/4.5f1205d6.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/40.e3da934a.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/41.4621d9b8.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/42.14488030.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/43.438b8ee0.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/44.4831dd82.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/45.ffdf964e.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/46.312a5f7f.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/47.3c804963.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/48.0999af77.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/49.5947463d.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/5.b826813d.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/50.f8d5acc5.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/51.4811a3bc.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/52.49e327e8.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/53.5d6b34bf.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/54.7f69157f.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/55.a2bfde64.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/56.8e1c01f2.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/57.34128034.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/58.6a5fc824.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/59.ffda2724.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/6.451c0322.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/60.c3bffdfc.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/61.2ade7319.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/62.45fce331.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/63.6767c457.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/64.053b1d63.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/65.cdcd3343.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/66.a083fdaa.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/67.b005b2d8.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/68.03f37f88.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/69.388b7e78.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/7.1c9e1e68.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/70.b7781aa1.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/71.d1e62156.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/72.e9a89248.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/73.b7581a97.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/74.db6d3a8c.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/75.acad408a.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/76.d5772c25.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/77.18cf9721.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/78.19a82ba4.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/79.126fac11.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/8.994c0025.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/80.df26d56f.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/9.0bc7ae5b.js">
    <link rel="stylesheet" href="/vuepress-studynotes/assets/css/0.styles.6ab362df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-studynotes/" class="home-link router-link-active"><img src="/vuepress-studynotes/logo.jpg" alt="BlaxBerry" class="logo"> <span class="site-name can-hide">BlaxBerry</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-studynotes/notes/front/JavaScript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/front/React/" class="nav-link">
  React.js
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/front/Vue/" class="nav-link">
  Vue.js
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/front/" class="nav-link">
  前端目录
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/back/" class="nav-link">
  后端目录
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/other/" class="nav-link">
  其他技术
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-studynotes/notes/front/JavaScript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/front/React/" class="nav-link">
  React.js
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/front/Vue/" class="nav-link">
  Vue.js
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/front/" class="nav-link">
  前端目录
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/back/" class="nav-link">
  后端目录
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/other/" class="nav-link">
  其他技术
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python 异常与错误处理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#简介" class="sidebar-link">简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#exception-类" class="sidebar-link">Exception 类</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#异常类型" class="sidebar-link">异常类型</a></li></ul></li><li><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#捕获异常" class="sidebar-link">捕获异常</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#except" class="sidebar-link">except</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#捕获不同错误类型" class="sidebar-link">捕获不同错误类型</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#捕获未知错误" class="sidebar-link">捕获未知错误</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#异常参数" class="sidebar-link">异常参数</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#else" class="sidebar-link">else</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#finally" class="sidebar-link">finally</a></li></ul></li><li><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#异常的传递性" class="sidebar-link">异常的传递性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#主动抛出异常" class="sidebar-link">主动抛出异常</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#raise" class="sidebar-link">raise</a></li></ul></li><li><a href="/vuepress-studynotes/notes/back/Python/Basic/ExceptionHandling/ExceptionHandling.html#自定义错误类" class="sidebar-link">自定义错误类</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="python-异常与错误处理"><a href="#python-异常与错误处理" class="header-anchor">#</a> Python 异常与错误处理</h1> <p><img src="https://www.python.jp/pages/python_logo2.png" alt=""></p> <p></p><div class="table-of-contents"><ul><li><a href="#简介">简介</a><ul><li><a href="#exception-类">Exception 类</a></li><li><a href="#异常类型">异常类型</a></li></ul></li><li><a href="#捕获异常">捕获异常</a><ul><li><a href="#except">except</a></li><li><a href="#捕获不同错误类型">捕获不同错误类型</a></li><li><a href="#捕获未知错误">捕获未知错误</a></li><li><a href="#异常参数">异常参数</a></li><li><a href="#else">else</a></li><li><a href="#finally">finally</a></li></ul></li><li><a href="#异常的传递性">异常的传递性</a></li><li><a href="#主动抛出异常">主动抛出异常</a><ul><li><a href="#raise">raise</a></li></ul></li><li><a href="#自定义错误类">自定义错误类</a></li></ul></div><p></p> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>代码执行时只要遇到了错误就会停止，并提示错误类型与错误信息</p> <blockquote><p>如下：若用户输入的不是数字，程序执行被终止且打印异常</p></blockquote> <div class="language-python extra-class"><pre class="language-python"><code>input_num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ValueError: invalid literal for int() with base 10: 'a'</span>
</code></pre></div><hr> <h3 id="exception-类"><a href="#exception-类" class="header-anchor">#</a> Exception 类</h3> <p>Python 中的异常默认继承自 <code>Exception</code> 类</p> <ul><li><p>可 <a href="#%E6%8D%95%E8%8E%B7%E6%9C%AA%E7%9F%A5%E9%94%99%E8%AF%AF">使用 except 从 Exception 类捕获错误</a></p></li> <li><p>或 <a href="#raise">通过 raise 主动抛出创建的错误实例对象</a></p></li></ul> <hr> <h3 id="异常类型"><a href="#异常类型" class="header-anchor">#</a> 异常类型</h3> <table><thead><tr><th>BaseException</th> <th>所有异常的基类</th></tr></thead> <tbody><tr><td>SystemExit</td> <td>解释器请求退出</td></tr> <tr><td>KeyboardInterrupt</td> <td>用户中断执行(通常是输入^C)</td></tr> <tr><td>Exception</td> <td>常规错误的基类</td></tr> <tr><td>StopIteration</td> <td>迭代器没有更多的值</td></tr> <tr><td>GeneratorExit</td> <td>生成器(generator)发生异常来通知退出</td></tr> <tr><td>StandardError</td> <td>所有的内建标准异常的基类</td></tr> <tr><td>ArithmeticError</td> <td>所有数值计算错误的基类</td></tr> <tr><td>FloatingPointError</td> <td>浮点计算错误</td></tr> <tr><td>OverflowError</td> <td>数值运算超出最大限制</td></tr> <tr><td>ZeroDivisionError</td> <td>除(或取模)零 (所有数据类型)</td></tr> <tr><td>AssertionError</td> <td>断言语句失败</td></tr> <tr><td>AttributeError</td> <td>对象没有这个属性</td></tr> <tr><td>EOFError</td> <td>没有内建输入,到达 EOF 标记</td></tr> <tr><td>EnvironmentError</td> <td>操作系统错误的基类</td></tr> <tr><td>IOError</td> <td>输入/输出操作失败</td></tr> <tr><td>OSError</td> <td>操作系统错误</td></tr> <tr><td>WindowsError</td> <td>系统调用失败</td></tr> <tr><td>ImportError</td> <td>导入模块/对象失败</td></tr> <tr><td>LookupError</td> <td>无效数据查询的基类</td></tr> <tr><td>IndexError</td> <td>序列中没有此索引(index)</td></tr> <tr><td>KeyError</td> <td>映射中没有这个键</td></tr> <tr><td>MemoryError</td> <td>内存溢出错误(对于 Python 解释器不是致命的)</td></tr> <tr><td>NameError</td> <td>未声明/初始化对象 (没有属性)</td></tr> <tr><td>UnboundLocalError</td> <td>访问未初始化的本地变量</td></tr> <tr><td>ReferenceError</td> <td>弱引用(Weak reference)试图访问已经垃圾回收了的对象</td></tr> <tr><td>RuntimeError</td> <td>一般的运行时错误</td></tr> <tr><td>NotImplementedError</td> <td>尚未实现的方法</td></tr> <tr><td>SyntaxError</td> <td>Python 语法错误</td></tr> <tr><td>IndentationError</td> <td>缩进错误</td></tr> <tr><td>TabError</td> <td>Tab 和空格混用</td></tr> <tr><td>SystemError</td> <td>一般的解释器系统错误</td></tr> <tr><td>TypeError</td> <td>对类型无效的操作</td></tr> <tr><td>ValueError</td> <td>传入无效的参数</td></tr> <tr><td>UnicodeError</td> <td>Unicode 相关的错误</td></tr> <tr><td>UnicodeDecodeError</td> <td>Unicode 解码时的错误</td></tr> <tr><td>UnicodeEncodeError</td> <td>Unicode 编码时错误</td></tr> <tr><td>UnicodeTranslateError</td> <td>Unicode 转换时错误</td></tr> <tr><td>Warning</td> <td>警告的基类</td></tr> <tr><td>DeprecationWarning</td> <td>关于被弃用的特征的警告</td></tr> <tr><td>FutureWarning</td> <td>关于构造将来语义会有改变的警告</td></tr> <tr><td>OverflowWarning</td> <td>旧的关于自动提升为长整型(long)的警告</td></tr> <tr><td>PendingDeprecationWarning</td> <td>关于特性将会被废弃的警告</td></tr> <tr><td>RuntimeWarning</td> <td>可疑的运行时行为(runtime behavior)的警告</td></tr> <tr><td>SyntaxWarning</td> <td>可疑的语法的警告</td></tr> <tr><td>UserWarning</td> <td>用户代码生成的警告</td></tr></tbody></table> <br> <h2 id="捕获异常"><a href="#捕获异常" class="header-anchor">#</a> 捕获异常</h2> <p><code>try</code> 中写尝试执行的代码，若执行时遇到了错误时会执行错误代码</p> <p>后续代码继续执行，不会因为异常出现而停止</p> <hr> <h3 id="except"><a href="#except" class="header-anchor">#</a> except</h3> <p><code>try...except...</code> 会捕获所有的异常</p> <p>无法识别出具体的异常信息</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 尝试执行的代码</span>
<span class="token keyword">except</span><span class="token punctuation">:</span>
    <span class="token comment"># 只要有异常错误就进行的处理</span>


<span class="token comment"># 其余代码</span>
<span class="token comment"># 其余代码</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    input_num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入整数: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">except</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'出现错误'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'others still running...'</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h3 id="捕获不同错误类型"><a href="#捕获不同错误类型" class="header-anchor">#</a> 捕获不同错误类型</h3> <p><code>except</code> 后可以指定预期出现的错误类型，并指定该类型错误出现时进行的处理，可捕获的错误类型详见下文 [错误类型](# 异常类型)</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 尝试执行的代码</span>
<span class="token keyword">except</span> 错误类型<span class="token punctuation">:</span>
    <span class="token comment"># 针对该类型的处理</span>
<span class="token keyword">except</span> <span class="token punctuation">(</span>错误类型<span class="token punctuation">,</span> 错误类型<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 针对该类型的处理</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    input_num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入整数做分母被 10 除: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    caculate_result <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span>input_num
<span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'输入的不是数字'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'0 不能作为分母'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    input_num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入整数做分母被 10 除: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    caculate_result <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span>input_num
<span class="token keyword">except</span> <span class="token punctuation">(</span>ValueError<span class="token punctuation">,</span> ZeroDivisionError<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'输入值不正确'</span><span class="token punctuation">)</span>
</code></pre></div><hr> <h3 id="捕获未知错误"><a href="#捕获未知错误" class="header-anchor">#</a> 捕获未知错误</h3> <p>Python 中的异常默认继承自 <code>Exception</code> 类</p> <p>通过 <code>Exception as 自定义变量</code> 将异常信息存于变量</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 尝试执行的代码</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> 变量<span class="token punctuation">:</span>
    <span class="token comment"># 错误的处理</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    input_num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入整数: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    caculate_result <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span>input_num
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> error<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
</code></pre></div><p>若放于所有指定错误类型的 <code>except</code> 的最后</p> <p>可用于捕获未指定的（无法预判的）未知异常</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token comment"># 尝试执行的代码</span>
<span class="token keyword">except</span> 错误类型<span class="token punctuation">:</span>
    <span class="token comment"># 针对处理处理</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> 自定义变量<span class="token punctuation">:</span>
    <span class="token comment"># 针对未指定的未知错误的处理</span>
</code></pre></div><hr> <h3 id="异常参数"><a href="#异常参数" class="header-anchor">#</a> 异常参数</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> 函数<span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
   <span class="token keyword">except</span> 异常类型<span class="token punctuation">,</span> 参数<span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre></div><hr> <h3 id="else"><a href="#else" class="header-anchor">#</a> else</h3> <p>仅在没有异常时才会执行的代码</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
  <span class="token comment"># 尝试执行的代码</span>
<span class="token keyword">except</span><span class="token punctuation">:</span>
  <span class="token comment"># 错误处理</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
  <span class="token comment"># 没出错时的处理</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    input_num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入整数: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    caculate_result <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span>input_num
<span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'输入的不是数字'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'0 不能作为分母'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> error<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>caculate_resul<span class="token punctuation">)</span>
</code></pre></div><hr> <h3 id="finally"><a href="#finally" class="header-anchor">#</a> finally</h3> <p>无论是否有异常最后都会执行的代码</p> <p><code>finally</code> 执行完后才会执行后续其余代码</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
  <span class="token comment"># 尝试执行的代码</span>
<span class="token keyword">except</span><span class="token punctuation">:</span>
  <span class="token comment"># 错误处理</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
  <span class="token comment"># 最后都执行的代码</span>

<span class="token comment"># 其余代码</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">try</span><span class="token punctuation">:</span>
    input_num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'请输入整数: '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    caculate_result <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span>input_num
<span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'输入的不是数字'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> ZeroDivisionError<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'0 不能作为分母'</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> error<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token keyword">finally</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'判断结束'</span><span class="token punctuation">)</span>


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'其余代码....'</span><span class="token punctuation">)</span>
</code></pre></div><br> <h2 id="异常的传递性"><a href="#异常的传递性" class="header-anchor">#</a> 异常的传递性</h2> <p>调用函数出现异常时，异常会被逐层向上传递给其调用者</p> <p>可利用异常传递性统一将异常捕获写在主程序，否则在每一个函数都书写 <code>try...except...</code> 太麻烦了</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">demo_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;请输入一个整数：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">demo_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token number">10</span><span class="token operator">/</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;请输入一个能被 10 除的数：&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">try</span><span class="token punctuation">:</span>
    result_1 <span class="token operator">=</span> demo_1<span class="token punctuation">(</span><span class="token punctuation">)</span>
    result_2 <span class="token operator">=</span> demo_2<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">except</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'出错了'</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result_1<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result_2<span class="token punctuation">)</span>
</code></pre></div><br> <h2 id="主动抛出异常"><a href="#主动抛出异常" class="header-anchor">#</a> 主动抛出异常</h2> <h3 id="raise"><a href="#raise" class="header-anchor">#</a> raise</h3> <ol><li><p>调用内置 <code>Exception</code> 错误类创建的错误对象，</p> <p>参数为错误的描述信息</p></li> <li><p>通过 <code>raise</code> 抛出创建的错误对象</p></li></ol> <p>抛出的错误对象可以被 <code>try...except...</code> 捕获到</p> <p>捕获到的错误类型是 <code>Exception</code> ，错误描述是传入的字符串参数</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">input_password</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    password <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;请输入密码：&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">6</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> password
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">&quot;长度不能小于 6 位&quot;</span><span class="token punctuation">)</span>


<span class="token keyword">try</span><span class="token punctuation">:</span>
    input_password<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> error<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
</code></pre></div><br> <h2 id="自定义错误类"><a href="#自定义错误类" class="header-anchor">#</a> 自定义错误类</h2> <p>Python 中的异常默认继承自 <code>Exception</code> 类</p> <p>也可以自定义错误类，但需继承 <code>RuntimeError</code> 基类</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">CustomError</span><span class="token punctuation">(</span>RuntimeError<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>message <span class="token operator">=</span> message


<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">raise</span> CustomError<span class="token punctuation">(</span><span class="token string">&quot;出错了啊啊啊啊啊&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">except</span> CustomError <span class="token keyword">as</span> error<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/vuepress-studynotes/assets/js/app.e982dd05.js" defer></script><script src="/vuepress-studynotes/assets/js/2.46821667.js" defer></script><script src="/vuepress-studynotes/assets/js/20.e0385ce8.js" defer></script>
  </body>
</html>
