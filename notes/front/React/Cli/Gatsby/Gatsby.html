<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gatsby 基础 | BlaxBerry</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Chen's Program Study Note">
    
    <link rel="preload" href="/vuepress-studynotes/assets/css/0.styles.6ab362df.css" as="style"><link rel="preload" href="/vuepress-studynotes/assets/js/app.8982b633.js" as="script"><link rel="preload" href="/vuepress-studynotes/assets/js/2.46821667.js" as="script"><link rel="preload" href="/vuepress-studynotes/assets/js/66.3e71be29.js" as="script"><link rel="prefetch" href="/vuepress-studynotes/assets/js/10.cb186fec.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/11.73ce61ad.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/12.26fa6963.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/13.701aefbe.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/14.ec9ebeb4.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/15.37741dbc.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/16.b462ca81.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/17.3d2a77e6.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/18.b25259e5.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/19.d15a70d8.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/20.d759a60a.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/21.6894d3b0.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/22.353b26dd.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/23.f804644d.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/24.070a352f.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/25.4e010a06.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/26.69a906d7.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/27.1c112402.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/28.654ddea3.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/29.e778c6c1.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/3.7a071735.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/30.8729fb9c.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/31.ef00a131.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/32.b3f7d33e.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/33.4375a7da.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/34.23990cc0.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/35.9e707245.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/36.24eb59fc.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/37.8193a47f.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/38.198d5812.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/39.8db1f46e.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/4.5f1205d6.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/40.97853a35.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/41.040abbdc.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/42.977c2ce9.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/43.04fffb8c.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/44.00b70c38.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/45.8a51aaa2.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/46.d1bd7854.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/47.95ff1bc9.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/48.41c0617a.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/49.d484a18a.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/5.b826813d.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/50.3dcdfeae.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/51.8a5b0b91.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/52.525c24a3.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/53.2d456b36.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/54.c4cad8bb.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/55.c93c30a4.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/56.facc903c.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/57.95fc30db.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/58.942b1ec5.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/59.b84fe869.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/6.451c0322.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/60.5ba0aba1.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/61.4192abc4.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/62.39a8733d.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/63.fd31b650.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/64.63cc3605.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/65.730562ef.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/67.8e96562f.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/68.8af95664.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/69.d2d7930c.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/7.d00e6429.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/70.b2b755f7.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/71.598b71d6.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/72.530e33b7.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/73.82c528cd.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/74.1aa40e76.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/75.2f616e96.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/76.15b7382a.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/77.e3c5881b.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/78.62b51d05.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/79.4728e270.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/8.797d72ed.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/80.508912ab.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/81.15f4da2e.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/82.a4740c7b.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/83.1019a008.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/84.743c2a83.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/85.c21d3566.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/86.3682c9e2.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/87.61d488c9.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/88.9fa6498a.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/89.2fc35358.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/9.f4a3cb87.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/90.6cc517ae.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/91.5c7beec7.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/92.e76538b7.js"><link rel="prefetch" href="/vuepress-studynotes/assets/js/93.c2d33a27.js">
    <link rel="stylesheet" href="/vuepress-studynotes/assets/css/0.styles.6ab362df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-studynotes/" class="home-link router-link-active"><img src="/vuepress-studynotes/logo.jpg" alt="BlaxBerry" class="logo"> <span class="site-name can-hide">BlaxBerry</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-studynotes/notes/front/JavaScript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/front/React/" class="nav-link router-link-active">
  React.js
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/front/Vue/" class="nav-link">
  Vue.js
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/back/Python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/front/" class="nav-link">
  前端目录
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/back/" class="nav-link">
  后端目录
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/other/" class="nav-link">
  其他技术
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-studynotes/notes/front/JavaScript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/front/React/" class="nav-link router-link-active">
  React.js
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/front/Vue/" class="nav-link">
  Vue.js
</a></div><div class="nav-item"><a href="/vuepress-studynotes/notes/back/Python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/front/" class="nav-link">
  前端目录
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/back/" class="nav-link">
  后端目录
</a></div><div class="nav-item"><a href="/vuepress-studynotes/guide/other/" class="nav-link">
  其他技术
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Gatsby 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#简介" class="sidebar-link">简介</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#脚手架使用" class="sidebar-link">脚手架使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#创建" class="sidebar-link">创建</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#运行" class="sidebar-link">运行</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#打包" class="sidebar-link">打包</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#检查" class="sidebar-link">检查</a></li></ul></li><li><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#目录结构" class="sidebar-link">目录结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#cache" class="sidebar-link">.cache</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#plugins" class="sidebar-link">plugins</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#src" class="sidebar-link">src</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#pubilc" class="sidebar-link">pubilc</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#static" class="sidebar-link">static</a></li></ul></li><li><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#配置文件" class="sidebar-link">配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#gatsby-browser-js" class="sidebar-link">gatsby-browser.js</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#gatsby-config-js" class="sidebar-link">gatsby-config.js</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#gatsby-ssr-js" class="sidebar-link">gatsby-ssr.js</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#gatsby-node-js" class="sidebar-link">gatsby-node.js</a></li></ul></li><li><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#路由-页面" class="sidebar-link">路由 &amp; 页面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#单一路由" class="sidebar-link">单一路由</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#嵌套路由" class="sidebar-link">嵌套路由</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#index-jsx" class="sidebar-link">index.jsx</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#_404-页面" class="sidebar-link">404 页面</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#id-jsx" class="sidebar-link">[id].jsx</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#props-pageprops" class="sidebar-link">props &amp; PageProps</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#location" class="sidebar-link">location</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#useloaction" class="sidebar-link">useLoaction()</a></li></ul></li><li><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#路由切换-页面跳转" class="sidebar-link">路由切换 &amp; 页面跳转</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#link-标签" class="sidebar-link">Link 标签</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#navigate" class="sidebar-link">navigate()</a></li></ul></li><li><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#静态资源" class="sidebar-link">静态资源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#静态资源导入" class="sidebar-link">静态资源导入</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#上线后路径" class="sidebar-link">上线后路径</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#加载字体文件" class="sidebar-link">加载字体文件</a></li><li class="sidebar-sub-header"><a href="/vuepress-studynotes/notes/front/React/Cli/Gatsby/Gatsby.html#staticimage-组件" class="sidebar-link">StaticImage 组件</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gatsby-基础"><a href="#gatsby-基础" class="header-anchor">#</a> Gatsby 基础</h1> <p><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F386550%2F64d999d5-5c8d-3edf-6157-4447fc86da3f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=1aa4fff5e9cc88a6f3b90fed52d716ad" alt=""></p> <p></p><div class="table-of-contents"><ul><li><a href="#简介">简介</a></li><li><a href="#脚手架使用">脚手架使用</a><ul><li><a href="#安装">安装</a></li><li><a href="#创建">创建</a></li><li><a href="#运行">运行</a></li><li><a href="#打包">打包</a></li><li><a href="#检查">检查</a></li></ul></li><li><a href="#目录结构">目录结构</a><ul><li><a href="#cache">.cache</a></li><li><a href="#plugins">plugins</a></li><li><a href="#src">src</a></li><li><a href="#pubilc">pubilc</a></li><li><a href="#static">static</a></li></ul></li><li><a href="#配置文件">配置文件</a><ul><li><a href="#gatsby-browser-js">gatsby-browser.js</a></li><li><a href="#gatsby-config-js">gatsby-config.js</a></li><li><a href="#gatsby-ssr-js">gatsby-ssr.js</a></li><li><a href="#gatsby-node-js">gatsby-node.js</a></li></ul></li><li><a href="#路由-页面">路由 &amp; 页面</a><ul><li><a href="#单一路由">单一路由</a></li><li><a href="#嵌套路由">嵌套路由</a></li><li><a href="#index-jsx">index.jsx</a></li><li><a href="#_404-页面">404 页面</a></li><li><a href="#id-jsx">[id].jsx</a></li><li><a href="#props-pageprops">props &amp; PageProps</a></li><li><a href="#location">location</a></li><li><a href="#useloaction">useLoaction()</a></li></ul></li><li><a href="#路由切换-页面跳转">路由切换 &amp; 页面跳转</a><ul><li><a href="#link-标签">Link 标签</a></li><li><a href="#navigate">navigate()</a></li></ul></li><li><a href="#静态资源">静态资源</a><ul><li><a href="#静态资源导入">静态资源导入</a></li><li><a href="#上线后路径">上线后路径</a></li><li><a href="#加载字体文件">加载字体文件</a></li><li><a href="#staticimage-组件">StaticImage 组件</a></li></ul></li></ul></div><p></p> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <p>Gatsby 是一个基于 React 的开源框架，用于创建网站和应用程序。</p> <p>比如：网站、博客，电商、主页等</p> <h2 id="脚手架使用"><a href="#脚手架使用" class="header-anchor">#</a> 脚手架使用</h2> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i -g gatsby-cli

gatsby --version
<span class="token comment"># Gatsby CLI version: 4.1.2</span>
</code></pre></div><h3 id="创建"><a href="#创建" class="header-anchor">#</a> 创建</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>gatsby new 项目名
</code></pre></div><h3 id="运行"><a href="#运行" class="header-anchor">#</a> 运行</h3> <blockquote><p>默认开启在<code>localhost:8000</code></p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>gatsby develop
<span class="token comment"># yarn run develop</span>
</code></pre></div><h3 id="打包"><a href="#打包" class="header-anchor">#</a> 打包</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>gatsby build
<span class="token comment"># yarn run build</span>
</code></pre></div><h3 id="检查"><a href="#检查" class="header-anchor">#</a> 检查</h3> <blockquote><p>启动静态网页服务器供测试打包生成的静态网页</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>gatsby serve
<span class="token comment"># yarn run serve</span>
</code></pre></div><h2 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h2> <p>Gatsby 提供了几个特定的文件和文件夹</p> <p>但由于 Gatsby 站点也是 React 应用程序，除了 Gatsby 特定的文件和文件夹外，也遵循 React 应用程序文件夹结构，比如自定义<code>components</code>、<code>assets</code>等目录</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> <span class="token punctuation">.</span>cache
<span class="token operator">|</span><span class="token operator">-</span> plugins
<span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">public</span> <span class="token comment">// 上线后可访问到的静态文件</span>
<span class="token operator">|</span><span class="token operator">-</span> src
    <span class="token operator">|</span><span class="token operator">-</span> api
    <span class="token operator">|</span><span class="token operator">-</span> pages
    <span class="token operator">|</span><span class="token operator">-</span> templates
    <span class="token operator">|</span><span class="token operator">-</span> html<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">static</span>
<span class="token operator">|</span><span class="token operator">-</span> gatsby<span class="token operator">-</span>config<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">-</span> gatsby<span class="token operator">-</span>node<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">-</span> gatsby<span class="token operator">-</span>ssr<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">-</span> gatsby<span class="token operator">-</span>browser<span class="token punctuation">.</span>js
</code></pre></div><hr> <h3 id="cache"><a href="#cache" class="header-anchor">#</a> .cache</h3> <p><code>.cache</code>是 gatsby 编译运行的缓存文件夹</p> <p><code>.gitignore</code>忽略此文件夹，无需上传和改动</p> <hr> <h3 id="plugins"><a href="#plugins" class="header-anchor">#</a> plugins</h3> <p><code>plugins</code>目录用于存放没有在 npm 上发布的本地插件</p> <hr> <h3 id="src"><a href="#src" class="header-anchor">#</a> src</h3> <p><code>src</code>目录是代码目录</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> src
    <span class="token operator">|</span><span class="token operator">-</span> components
    <span class="token operator">|</span><span class="token operator">-</span> utils
    <span class="token operator">|</span><span class="token operator">-</span> lib
    <span class="token operator">|</span><span class="token operator">-</span> assets
    <span class="token operator">|</span><span class="token operator">-</span> styles
    <span class="token operator">...</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">src 目录：</p> <ul><li><strong>pages</strong></li></ul> <p>改目录下的文件/文件夹会被 Gatsby 自动成为路由，详见<a href="#%E8%B7%AF%E7%94%B1-%E9%A1%B5%E9%9D%A2">路由 &amp; 页面</a></p> <ul><li><strong>templates</strong></li></ul> <p>包含用于以编程方式创建页面的模板</p> <ul><li><strong>html.js</strong></li></ul> <p>对于 default 的自定义配置<code>.cache/default_html.js</code></p> <ul><li><strong>api</strong></li></ul> <p>其中的 JS 和 TS 文件会根据<code>src/api</code>文件名自动成为函数</p></div> <hr> <h3 id="pubilc"><a href="#pubilc" class="header-anchor">#</a> pubilc</h3> <p><code>public</code>是编译生成的最终文件夹，部署发布网站用，无需改动</p> <p>该目录下的静态资源在上线后是可以直接从浏览器地址栏访问到的</p> <hr> <h3 id="static"><a href="#static" class="header-anchor">#</a> static</h3> <p><code>static</code>目录下的文件不会被 webpack 处理，</p> <p>会在<code>yarn run develop</code>编译时被原封不动地复制到公用<code>public</code>根目录</p> <blockquote><p>比如 ：</p> <p><code>static/logo.png</code>会拷贝到 <code>public/logo.png</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">public</span>
    <span class="token operator">|</span><span class="token operator">-</span> logo<span class="token punctuation">.</span>png
<span class="token operator">|</span><span class="token operator">-</span> src
<span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">static</span>
    <span class="token operator">|</span><span class="token operator">-</span> logo<span class="token punctuation">.</span>png
</code></pre></div><br> <h2 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h2> <h3 id="gatsby-browser-js"><a href="#gatsby-browser-js" class="header-anchor">#</a> gatsby-browser.js</h3> <p><code>gatsby-browser.js</code></p> <p>Gatsby 在 <code>gatsby-browser.js</code>文件中提供了一些 API，可供 开发者 监控浏览器的特定事件 和 写一些全局组件</p> <p>详见 <a href="./Gatsby-ConfigsFiles#l#gatsby-browser-js">Gatsby 配置文件</a></p> <h3 id="gatsby-config-js"><a href="#gatsby-config-js" class="header-anchor">#</a> gatsby-config.js</h3> <p><code>gatsby-config.js</code>为 Gatsby 网站配置选项文件</p> <p>可以在此处指定包括网站标题、描述、插件等的元数据</p> <p>详见 <a href="./Gatsby-ConfigsFiles#l#gatsby-config-js">Gatsby 配置文件</a></p> <h3 id="gatsby-ssr-js"><a href="#gatsby-ssr-js" class="header-anchor">#</a> gatsby-ssr.js</h3> <p><code>gatsby-ssr.js</code></p> <p>提供了一些 服务器端渲染 API，用于编译完成之前修改这些 HTML 的内容</p> <p>详见 <a href="./Gatsby-ConfigsFiles#l#gatsby-ssr-js">Gatsby 配置文件</a></p> <h3 id="gatsby-node-js"><a href="#gatsby-node-js" class="header-anchor">#</a> gatsby-node.js</h3> <p><code>gatsby-node.js</code>是实现 Gatsby 的 Node.js API 以自定义和扩展影响构建过程的默认设置文件</p> <p>使用 createPage 以编程方式创建页面</p> <p>详见 <a href="./Gatsby-ConfigsFiles#l#gatsby-node-js">Gatsby 配置文件</a></p> <br> <h2 id="路由-页面"><a href="#路由-页面" class="header-anchor">#</a> 路由 &amp; 页面</h2> <p><code>gatsby</code>默认将<code>pages</code>目录下的文件名和文件夹名匹配为路由名</p> <p>页面文件名和文件夹名采用小写</p> <h3 id="单一路由"><a href="#单一路由" class="header-anchor">#</a> 单一路由</h3> <p><code>pages</code>目录下一个文件匹配一个路由</p> <p>路由名匹配文件名</p> <div class="language-http extra-class"><pre class="language-http"><code>域名/文件名
</code></pre></div><blockquote><p>如下：</p> <p><code>pages/index.jsx</code> 指向 <code>/</code></p> <p><code>pages/a.jsx</code> 指向 <code>/a</code></p> <p><code>pages/b.jsx</code> 指向 <code>/b</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span>src
    <span class="token operator">|</span><span class="token operator">-</span> pages
        <span class="token operator">|</span><span class="token operator">-</span> index<span class="token punctuation">.</span>jsx
        <span class="token operator">|</span><span class="token operator">-</span> a<span class="token punctuation">.</span>jsx
        <span class="token operator">|</span><span class="token operator">-</span> b<span class="token punctuation">.</span>jsx
</code></pre></div><hr> <h3 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h3> <p>嵌套路由是在<code>pages</code>目录下创建子目录，该子目录名与其下的子文件名匹配路由</p> <div class="language-http extra-class"><pre class="language-http"><code>域名/pages下子目录名/文件名
</code></pre></div><blockquote><p>如下：</p> <p><code>pages/index.jsx</code> 指向 <code>/</code></p> <p><code>pages/a/01.jsx</code> 指向 <code>/a/01</code></p> <p><code>pages/b/01.jsx</code> 指向 <code>/b/01</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span>src
    <span class="token operator">|</span><span class="token operator">-</span> index<span class="token punctuation">.</span>jsx
    <span class="token operator">|</span><span class="token operator">-</span> pages
        <span class="token operator">|</span><span class="token operator">-</span> a
            <span class="token operator">|</span><span class="token operator">-</span> <span class="token number">01.</span>jsx
            <span class="token operator">|</span><span class="token operator">-</span> <span class="token number">02.</span>jsx
        <span class="token operator">|</span><span class="token operator">-</span> b
            <span class="token operator">|</span><span class="token operator">-</span> <span class="token number">01.</span>jsx
            <span class="token operator">|</span><span class="token operator">-</span> <span class="token number">02.</span>jsx
</code></pre></div><p>也可以在默认首页<code>index.jsx</code>进行<a href="#navigate">编程式导航</a>跳转页面到指定路由地址</p> <p>使网站的首页转为指定路由地址对应的<code>pages/目录/文件.jsx</code></p> <blockquote><p>如下：</p> <p>默认首页地址由<code>/</code>改为<code>/admin/</code></p> <p>渲染的文件由默认<code>pages/index.tsx</code>改为<code>pages/admin/index.tsx</code></p></blockquote> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// Gatsby项目/src/pages/index.tsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> navigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useMount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ahooks&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> IndexPage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span><span class="token parameter">Element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&quot;/admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="index-jsx"><a href="#index-jsx" class="header-anchor">#</a> index.jsx</h3> <blockquote><p>如下：</p> <p>默认页面组件内容</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><p>也可通过<a href="#navigate">编程式导航</a>跳转页面到指定路由地址</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> navigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useMount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ahooks&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useMount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&quot;/admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="_404-页面"><a href="#_404-页面" class="header-anchor">#</a> 404 页面</h3> <p>当<code>gatsby</code>无法匹配路由地址与<code>pages</code>目录的同名文件时，会查询<code>pages</code>目录下的<code>404.js</code>文件</p> <blockquote><p>在开发环境下，不会直接跳转到 404 页面，会提醒开发者该页面不匹配路由</p> <p>在真实环境下是直接跳转 404 页面的</p></blockquote> <p><img src="https://www.gatsbyjs.com/static/ea5e1e0405ce033127573ac8a5dd3508/5df5d/gatsby-default-404.png" alt=""></p> <hr> <h3 id="id-jsx"><a href="#id-jsx" class="header-anchor">#</a> [id].jsx</h3> <p>用于设置<strong>动态路由</strong></p> <p><code>[id].jsx</code> 路由组件匹配的路由地址名取决于路由跳转时传递的 <code>params</code> 参数的值</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> 参数<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 或</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> 参数<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">文本</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
</code></pre></div><p><code>/参数值</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> pages
  <span class="token operator">|</span><span class="token operator">-</span> index<span class="token punctuation">.</span>jsx
  <span class="token operator">|</span><span class="token operator">-</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>jsx
</code></pre></div><p><code>/song/参数值</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> pages
  <span class="token operator">|</span><span class="token operator">-</span> index<span class="token punctuation">.</span>jsx
  <span class="token operator">|</span><span class="token operator">-</span> song
    <span class="token operator">|</span><span class="token operator">-</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>jsx
</code></pre></div><blockquote><p>如下：</p> <p><code>/song/5457097</code></p></blockquote> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// 跳转来自</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> navigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Card</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">go</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(id); // 5457097</span>
    <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/song/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Card</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">go</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>xxxx<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">xxxxxx</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Card</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Card<span class="token punctuation">;</span>
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// 跳转目标</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PageProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> PageProps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token comment">// console.log(id); // 5457097</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="props-pageprops"><a href="#props-pageprops" class="header-anchor">#</a> props &amp; PageProps</h3> <p>Gatsby 中是用了<code>@reach/router</code>，pages 目录中的每一个组件都是页面组件</p> <p>Gatsby 封装提供了类型<code>PageProps</code>供 TS 中页面组件(路由组件)的<code>props</code>继承</p> <blockquote><p>可从<code>PageProps</code>中解构出的内容如下：</p></blockquote> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PageProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/** The path for this current page */</span>
  path<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** The URI for the current page */</span>
  uri<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token comment">/** An extended version of window.document */</span>
  location<span class="token operator">:</span> WindowLocation<span class="token operator">&lt;</span>LocationState<span class="token operator">&gt;</span>
  <span class="token comment">/** A way to handle programmatically controlling navigation */</span>
  navigate<span class="token operator">:</span> NavigateFn
  <span class="token comment">/** can't get passed children as this is the root user-land component */</span>
  children<span class="token operator">:</span> <span class="token keyword">undefined</span>
  <span class="token comment">/** URL parameters when the page has a `matchPath` */</span>
  params<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token operator">&gt;</span>
  pageResources<span class="token operator">:</span> <span class="token punctuation">{</span>
    component<span class="token operator">:</span> React<span class="token punctuation">.</span>Component
    json<span class="token operator">:</span> <span class="token punctuation">{</span>
      data<span class="token operator">:</span> DataType
      pageContext<span class="token operator">:</span> PageContextType
    <span class="token punctuation">}</span>
    page<span class="token operator">:</span> <span class="token punctuation">{</span>
      componentChunkName<span class="token operator">:</span> <span class="token builtin">string</span>
      path<span class="token operator">:</span> <span class="token builtin">string</span>
      webpackCompilationHash<span class="token operator">:</span> <span class="token builtin">string</span>
      matchPath<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  data<span class="token operator">:</span> DataType
  pageContext<span class="token operator">:</span> PageContextType
  serverData<span class="token operator">:</span> ServerDataType
</code></pre></div><blockquote><p>如下：</p></blockquote> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PageProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> PageProps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="location"><a href="#location" class="header-anchor">#</a> location</h3> <p>因为 pages 目录中的每一个组件都是页面组件</p> <p>所以可以直接从组件 <code>props</code> 中解构获取 <code>location</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  hash<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  host<span class="token operator">:</span> <span class="token string">&quot;localhost:8000&quot;</span><span class="token punctuation">;</span>
  hostname<span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">;</span>
  href<span class="token operator">:</span> <span class="token string">&quot;http://localhost:8000/song/games&quot;</span><span class="token punctuation">;</span>
  key<span class="token operator">:</span> <span class="token string">&quot;1642835738249&quot;</span><span class="token punctuation">;</span>
  origin<span class="token operator">:</span> <span class="token string">&quot;http://localhost:8000&quot;</span><span class="token punctuation">;</span>
  pathname<span class="token operator">:</span> <span class="token string">&quot;/song/games&quot;</span><span class="token punctuation">;</span>
  port<span class="token operator">:</span> <span class="token string">&quot;8000&quot;</span><span class="token punctuation">;</span>
  protocol<span class="token operator">:</span> <span class="token string">&quot;http:&quot;</span><span class="token punctuation">;</span>
  search<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  state<span class="token operator">:</span><span class="token punctuation">{</span>
    key<span class="token operator">:</span> <span class="token string">&quot;1642835738249&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">//传递参数: 值</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>如下：</p> <p>获取当前路由地址<code>pathname</code></p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// JSX</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> location <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> location<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// TSX</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PageProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> PageProps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> location <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> location<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="useloaction"><a href="#useloaction" class="header-anchor">#</a> useLoaction()</h3> <p>利用<code>useLocation()</code>获取当前路由信息</p> <p>从 Gatsby 自带的<code>@reach/router</code>中解构获取</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@reach/router&quot;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> location<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>如下：</p> <p>获取当前路由地址<code>pathname</code></p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@reach/router&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> loaction<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><br> <h2 id="路由切换-页面跳转"><a href="#路由切换-页面跳转" class="header-anchor">#</a> 路由切换 &amp; 页面跳转</h2> <div class="custom-block tip"><p class="custom-block-title">路由切换方式：</p> <ul><li><strong>声明式导航</strong>: <code>&lt;Link/&gt;</code>标签</li> <li><strong>编程式导航</strong>: <code>navigate()</code>方法</li></ul></div> <h3 id="link-标签"><a href="#link-标签" class="header-anchor">#</a> Link 标签</h3> <p>Gastby 提供了 <strong><code>&lt;Link&gt;</code>标签</strong> 用于声明式路由跳转</p> <blockquote><p>不会发送新的页面网络请求，仅在浏览器中处理</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>通过 <code>to</code>属性置顶跳转路径</p> <p>通过 <code>state</code> 属性传递数据</p> <p>可添加 <code>replace</code> 属性使浏览器忽略的历史访问记录，实现禁止后退</p> <p>被选中的 Link 标签 可通过<code>activeClassName</code> 和 <code>activeStyle</code>增加样式</p> <p>可通过 <code>getProps</code> 给子级导航标签设置样式</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span>
  <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/路由地址<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">state</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      属性<span class="token operator">:</span> 值<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">replace</span>
  <span class="token attr-name">activeClassName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>类名<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">activeStyle</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
    样式属性<span class="token operator">:</span> <span class="token string">&quot;值&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  文本内容
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>如下：</p></blockquote> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">home page</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/aboout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">about page</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/projects/item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">item page</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span>
        <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/song/games<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">state</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;你好&quot;</span><span class="token punctuation">,</span>
          age<span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        携带参数
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// /song/games</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PageProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> PageProps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// {name: '你好', age: 28, key: '1642834068731'}</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="navigate"><a href="#navigate" class="header-anchor">#</a> navigate()</h3> <div class="custom-block tip"><p class="custom-block-title">获取方式：</p> <ul><li><p>从 Gatsby 中导入后<strong>直接使用</strong>（推荐）</p></li> <li><p><code>props.navigate()</code></p></li></ul> <blockquote><p>TS 中组件<code>props</code>继承<code>PageProps</code>后解构获取，详见 <a href="#props-pageprops">props &amp; PageProps</a></p></blockquote></div> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> navigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&quot;跳转地址&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    属性<span class="token operator">:</span> 值<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token operator">/</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">navigate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>如下：</p></blockquote> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> navigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">IndexPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">go</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&quot;/song/games&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      state<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&quot;你好&quot;</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      replace<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">跳转</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> PageProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> PageProps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// {name: '你好', age: 28, key: '1642834068731'}</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>如下：</p> <p>通过判断<code>GraphQL</code>的返回值进行登陆验证实现路由拦截</p> <p>不符合条件时通过<code>navigate()</code>跳转至登陆信息页面</p> <p>符合条件时在当前页面（<code>useLocation()</code>）</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@apollo/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> navigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;gatsby&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@reach/router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">&quot;../Components/common/Loading&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">GET_DATA</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../apolloClient/doucments/queries&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> error <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token constant">GET_DATA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>loading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&quot;/input-customer-info&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">navigate</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// data的结果返回需要时间，可通过跳转实现返回当前页面</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error when login&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> error<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> loading <span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Loading</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><br> <h2 id="静态资源"><a href="#静态资源" class="header-anchor">#</a> 静态资源</h2> <h3 id="静态资源导入"><a href="#静态资源导入" class="header-anchor">#</a> 静态资源导入</h3> <p>项目中有两种静态资源导入方式:</p> <ul><li><p><code>import</code> 导入</p></li> <li><p>从上线后的静态资源目录中导入（备用方案）</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">import 导入文件</p> <p>组件文件中通过<code>import</code>将静态资源作为一个模块导入后使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> 自定义模块名 <span class="token keyword">from</span> <span class="token string">&quot;开发时的相对路径&quot;</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>如下：</p> <p>从<code>src/assets</code>目录下导入 logo</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">&quot;../../../assets/logo.png&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Component</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Logo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Component<span class="token punctuation">;</span>
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">导入上线后真实路径</p> <p>导入的是<a href="#%E4%B8%8A%E7%BA%BF%E5%90%8E%E8%B7%AF%E5%BE%84">上线后静态资源所在路径</a>，即直接导入 <code>public/目录名/文件名.后缀名</code></p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;上线后的绝对路径&quot;</span><span class="token punctuation">}</span>
</code></pre></div><blockquote><p>如下：</p> <p>直接从上线后的真实路径导入 logo</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Component</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;/images/logo.png&quot;</span><span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Logo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Component<span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">public</span>
  <span class="token operator">|</span><span class="token operator">-</span> images
    <span class="token operator">|</span><span class="token operator">-</span>logp<span class="token punctuation">.</span>png
</code></pre></div></div> <hr> <h3 id="上线后路径"><a href="#上线后路径" class="header-anchor">#</a> 上线后路径</h3> <p>若静态资源被存放与<code>static</code>目录下，编译时被复制到<code>public</code>根目录</p> <p><code>pubilc</code>目录下的静态资源在上线后是可以直接从浏览器地址栏访问到的</p> <p>所以，<code>gastby</code>中直接引入静态资源应该是按照上线后的路径</p> <blockquote><p>如下：</p> <p>浏览器地址栏访问图片时需要访问<code>域名/images/pic01.png</code></p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> pubilc
  <span class="token operator">|</span><span class="token operator">-</span> images
    <span class="token operator">|</span><span class="token operator">-</span> pic01<span class="token punctuation">.</span>png
</code></pre></div><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">IndexPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/images/pic01.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> IndexPage<span class="token punctuation">;</span>
</code></pre></div><hr> <h3 id="加载字体文件"><a href="#加载字体文件" class="header-anchor">#</a> 加载字体文件</h3> <ul><li><p><strong>自定义下载的字体</strong></p> <blockquote><p>比如：xxx.woff、xxx.otf....</p></blockquote></li> <li><p><strong>Web Font 字体</strong> （注意版权） <br></p> <blockquote><p>比如：Google Fonts, Typekit, Fonts.com, and Fontdeck<br></p></blockquote></li> <li><p><strong>开源字体</strong></p> <blockquote><p>根据其 readme 中使用方法，并注意版权说明</p></blockquote></li></ul> <div class="custom-block tip"><p class="custom-block-title">加载自定义字体</p> <ol><li><p>拷贝字体格式文件到项目</p></li> <li><p>创建 css/scss 样式文件设定<code>font-face</code> 并导入样式文件</p></li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;自定义字体名&quot;</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;字体格式文件地址&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>如下：</p></blockquote> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token comment">// src/assets/style/index.scss</span>
<span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url">url</span><span class="token punctuation">(</span><span class="token string">&quot;../fonts/xxx.woff&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body </span><span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> 系统默认安全字体<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>
  <span class="token property">font-kerning</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> assets
  <span class="token operator">|</span><span class="token operator">-</span> fonts
    <span class="token operator">|</span><span class="token operator">-</span> xxx<span class="token punctuation">.</span>woff
  <span class="token operator">|</span><span class="token operator">-</span> styles
    <span class="token operator">|</span><span class="token operator">-</span> index<span class="token punctuation">.</span>scss
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">加载 web font</p> <ol><li>安装插件：<code>gatsby-plugin-web-font-loader</code></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> gatsby-plugin-web-font-loader
</code></pre></div><ol start="2"><li>配置插件，项目启动自动下载字体</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// gatsby-config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      resolve<span class="token operator">:</span> <span class="token string">&quot;gatsby-plugin-web-font-loader&quot;</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        google<span class="token operator">:</span> <span class="token punctuation">{</span>
          families<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;字体名&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;字体名&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>样式文件中直接使用</li></ol> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector">body </span><span class="token punctuation">{</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&quot;字体名&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;字体名&quot;</span><span class="token punctuation">,</span> 系统默认安全字体<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>
  <span class="token property">font-kerning</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <hr> <h3 id="staticimage-组件"><a href="#staticimage-组件" class="header-anchor">#</a> StaticImage 组件</h3> <p>Gatsby 中可通过 <strong><code>&lt;StaticImage/&gt;</code>组件</strong> 来加载本地、网络图片</p> <p>由插件<code>gatsby-plugin-image</code>提供</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> gatsby-plugin-image gatsby-plugin-sharp gatsby-source-filesystem
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// gatsby-config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  siteMetadata<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;Gatsby Site&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;gatsby-plugin-image&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gatsby-plugin-sharp&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>&lt;StaticImage/&gt;</code>组件功能类似<code>&lt;img/&gt;</code>，但会对图像做预处理</p> <p>会根据显示器不同而选择适合的分辨率进行图片渲染，无需下载原图加快显示速度也节约网络流量</p> <p>并提供了<code>imgStyle</code>属性，可代替<code>style</code>。可用来解决<code>borderRadius</code>在 <strong>safari 浏览器</strong> 失效问题</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StaticImage</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>路径<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>描述<span class="token punctuation">&quot;</span></span> <span class="token attr-name">imgStyle</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> 样式属性<span class="token operator">:</span> <span class="token string">&quot;值&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><blockquote><p>如下：</p></blockquote> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">StaticImage</span></span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../images/logo.jpg<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">imgStyle</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
    border<span class="token operator">:</span> <span class="token string">&quot;solid 1px #000&quot;</span><span class="token punctuation">,</span>
    borderRadius<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/19/2022, 10:01:40 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/vuepress-studynotes/assets/js/app.8982b633.js" defer></script><script src="/vuepress-studynotes/assets/js/2.46821667.js" defer></script><script src="/vuepress-studynotes/assets/js/66.3e71be29.js" defer></script>
  </body>
</html>
